<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Management - Seller Dashboard</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
     <header class="header">
        <div class="container">

            <a href="../index.php" class="system-back-btn">
                <i class="fas fa-arrow-left"></i> Back
            </a>


            <div class="header-content">
                <div class="header-text">
                    <h1>Product Management</h1>
                    <p>Manage your product inventory and listings</p>
                </div>
               <a href="seller-product.html" class="btn btn-primary">
                    <i class="fas fa-plus"></i>
                    Add Product
                </a>

            </div>


             <div class="stats-grid">
                <div class="stat-card">
                    <i class="fas fa-box"></i>
                    <div>
                        <p>Total Products</p>
                        <span id="totalProducts">6</span>
                    </div>
                </div>
                <div class="stat-card">
                    <i class="fas fa-chart-line"></i>
                    <div>
                        <p>Active Products</p>
                        <span id="activeProducts">5</span>
                    </div>
                </div>
                <div class="stat-card">
                    <i class="fas fa-exclamation-circle"></i>
                    <div>
                        <p>Low Stock</p>
                        <span id="lowStockProducts">2</span>
                    </div>
                </div>
                <div class="stat-card">
                    <i class="fas fa-chart-bar"></i>
                    <div>
                        <p>Total Sold</p>
                        <span id="totalSold">570</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

     <main class="main">
        <div class="container">
             <div class="filters">
                <div class="search-container">
                    <i class="fas fa-search"></i>
                    <input type="text" id="searchInput" placeholder="Search products...">
                </div>
                <div class="filter-controls">
                    <select id="categoryFilter">
                        <option value="all">All Categories</option>
                        <option value="Tops & Knitwear">Tops & Knitwear</option>
                        <option value="Dresses & Jumpsuits / Rompers">Dresses & Jumpsuits / Rompers</option>
                        <option value="Bottoms (Pants, Shorts, Skirts, Leggings)">Bottoms (Pants, Shorts, Skirts, Leggings)</option>
                        <option value="Outerwear (Jackets, Coats, Cardigans, Hoodies)">Outerwear (Jackets, Coats, Cardigans, Hoodies)</option>
                        <option value="Sleepwear & Sets">Sleepwear & Sets</option>
                        <option value="Casual & Korean Fashion">Casual & Korean Fashion</option>
                    </select>
                    <select id="statusFilter">
                        <option value="all">All Status</option>
                        <option value="active">Active</option>
                        <option value="inactive">Inactive</option>
                    </select>
                    <button id="deleteSelectedBtn" class="btn btn-danger" style="margin-left:8px;">Delete Selected</button>
                
                </div>
            </div>

            <div class="filter-info">
                <span id="productCount">Showing 6 of 6 products</span>
            </div>

             <div id="productsGrid" class="products-grid">
             </div>

             <div id="emptyState" class="empty-state" style="display: none;">
                <i class="fas fa-box"></i>
                <h3>No products found</h3>
                <p>Try adjusting your filters or search terms</p>
            </div>
        </div>
    </main>

     <div id="addProductModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Add New Product</h2>
                <button class="modal-close" id="closeModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="productForm" class="product-form">
                <input type="hidden" id="productId" name="id">
                <div class="form-group">
                    <label for="productName">Product Name *</label>
                    <input type="text" id="productName" name="name" required>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="productPrice">Price (â‚±) *</label>
                        <input type="number" id="productPrice" name="price" step="0.01" required>
                    </div>
                    <div class="form-group">
                        <label for="productStock">Stock Quantity *</label>
                        <input type="number" id="productStock" name="stock" required>
                    </div>
                </div>

                <div class="form-group">
                    <label for="productCategory">Category *</label>
                    <select id="productCategory" name="category" required>
                        <option value="">Select a category</option>
                        <option value="Tops & Knitwear">Tops & Knitwear</option>
                        <option value="Dresses & Jumpsuits / Rompers">Dresses & Jumpsuits / Rompers</option>
                        <option value="Bottoms (Pants, Shorts, Skirts, Leggings)">Bottoms (Pants, Shorts, Skirts, Leggings)</option>
                        <option value="Outerwear (Jackets, Coats, Cardigans, Hoodies)">Outerwear (Jackets, Coats, Cardigans, Hoodies)</option>
                        <option value="Sleepwear & Sets">Sleepwear & Sets</option>
                        <option value="Casual & Korean Fashion">Casual & Korean Fashion</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="productDescription">Description</label>
                    <textarea id="productDescription" name="description" rows="3"></textarea>
                </div>

                <div class="form-group">
                    <label>Product Image</label>
                    <div class="file-upload">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <p>Drag & drop images here or click to browse</p>
                        <small>PNG, JPG up to 5MB</small>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-outline" id="cancelBtn">Cancel</button>
                    <a href="seller-product.html" class="btn btn-primary">Add Product</a>
                </div>
            </form>
        </div>
    </div>
   

    
     <div id="toast" class="toast">
        <i class="fas fa-check-circle"></i>
        <span id="toastMessage">Product added successfully!</span>
    </div>

    <script src="product-script.js"></script>
    <script>
      (function() {
        const btn = document.getElementById('deleteSelectedBtn');
        if (!btn) return;
        btn.addEventListener('click', async function() {
          const ids = Array.from(document.querySelectorAll('.row-select:checked'))
            .map(cb => parseInt(cb.dataset.id, 10))
            .filter(Number.isFinite);
          if (ids.length === 0) {
            alert('No products selected.');
            return;
          }
          if (!confirm(`Delete ${ids.length} selected product(s)? This cannot be undone.`)) return;
          try {
            const res = await fetch('delete_product.php', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({ ids })
            });
            const out = await res.json();
            if (out.success) {
              alert(`Deleted ${out.deleted || ids.length} product(s).`);
              location.reload();
            } else {
              alert(out.message || 'Failed to delete products.');
            }
          } catch (e) {
            alert('Failed to delete products.');
          }
        });
      })();
    </script>
  </body>
</html>